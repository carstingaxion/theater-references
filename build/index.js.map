{"version":3,"file":"index.js","mappings":"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","sources":["webpack://gatherpress-references/./src/edit.js","webpack://gatherpress-references/./src/editor.scss","webpack://gatherpress-references/./src/index.js","webpack://gatherpress-references/./src/style.scss","webpack://gatherpress-references/external window [\"wp\",\"blockEditor\"]","webpack://gatherpress-references/external window [\"wp\",\"blocks\"]","webpack://gatherpress-references/external window [\"wp\",\"components\"]","webpack://gatherpress-references/external window [\"wp\",\"data\"]","webpack://gatherpress-references/external window [\"wp\",\"element\"]","webpack://gatherpress-references/external window [\"wp\",\"i18n\"]","webpack://gatherpress-references/external window \"ReactJSXRuntime\"","webpack://gatherpress-references/webpack/bootstrap","webpack://gatherpress-references/webpack/runtime/chunk loaded","webpack://gatherpress-references/webpack/runtime/compat get default export","webpack://gatherpress-references/webpack/runtime/define property getters","webpack://gatherpress-references/webpack/runtime/hasOwnProperty shorthand","webpack://gatherpress-references/webpack/runtime/make namespace object","webpack://gatherpress-references/webpack/runtime/jsonp chunk loading","webpack://gatherpress-references/webpack/before-startup","webpack://gatherpress-references/webpack/startup","webpack://gatherpress-references/webpack/after-startup"],"sourcesContent":["/**\n * GatherPress References Block - Editor Component\n *\n * Renders the block in the WordPress block editor with live preview\n * and inspector controls for filtering and customization.\n *\n * @since 0.1.0\n */\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useBlockProps, InspectorControls } from '@wordpress/block-editor';\nimport {\n\tPanelBody,\n\tSelectControl,\n\tTextControl,\n\tToggleControl,\n\tRangeControl,\n\tNotice,\n} from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport { useEffect, useMemo } from '@wordpress/element';\n\n/**\n * Editor styles\n */\nimport './editor.scss';\n\n/**\n * Edit component for GatherPress References block\n *\n * Displays a preview of the block output with inspector controls\n * for customization. Shows placeholder data for better UX.\n *\n * @param {Object}   props               Block properties from WordPress\n * @param {Object}   props.attributes    Current block attribute values\n * @param {Function} props.setAttributes Function to update block attributes\n * @return {Element} React element to render in editor\n */\nexport default function Edit( { attributes, setAttributes } ) {\n\t// Destructure attributes for easier access\n\tconst { postType, refTermId, year, referenceType, headingLevel, yearSortOrder } =\n\t\tattributes;\n\n\t/**\n\t * Fetch all post types with gatherpress_references support\n\t */\n\tconst supportedPostTypes = useSelect( ( select ) => {\n\t\tconst postTypes = select( 'core' ).getPostTypes( { per_page: -1 } );\n\t\t\n\t\tif ( ! postTypes ) {\n\t\t\treturn [];\n\t\t}\n\t\t\n\t\treturn postTypes.filter( ( type ) => {\n\t\t\treturn type.supports && type.supports.gatherpress_references;\n\t\t} );\n\t}, [] );\n\n\t/**\n\t * Auto-assign post type on block insertion if only one supported type exists\n\t */\n\tuseEffect( () => {\n\t\tif ( ! postType && supportedPostTypes.length === 1 ) {\n\t\t\tsetAttributes( { postType: supportedPostTypes[0].slug } );\n\t\t}\n\t}, [ postType, supportedPostTypes, setAttributes ] );\n\n\t/**\n\t * Determine active post type for configuration lookup\n\t */\n\tconst activePostType = useMemo( () => {\n\t\t// Use explicitly set post type if available\n\t\tif ( postType ) {\n\t\t\treturn postType;\n\t\t}\n\t\t\n\t\t// Fall back to first supported post type\n\t\treturn supportedPostTypes.length > 0 ? supportedPostTypes[0].slug : null;\n\t}, [ postType, supportedPostTypes ] );\n\n\t/**\n\t * Fetch block configuration from the active post type\n\t */\n\tconst config = useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! activePostType ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\tconst postTypeObject = select( 'core' ).getPostType( activePostType );\n\t\t\t\n\t\t\tif ( ! postTypeObject || ! postTypeObject.supports ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\t// Extract the configuration from the supports object\n\t\t\tconst referencesSupport = postTypeObject.supports.gatherpress_references;\n\t\t\t\n\t\t\tif ( ! referencesSupport ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\t// If it's an array, take the first element (WordPress stores support args in arrays)\n\t\t\tif ( Array.isArray( referencesSupport ) && referencesSupport.length > 0 ) {\n\t\t\t\treturn referencesSupport[0];\n\t\t\t}\n\t\t\t\n\t\t\t// If it's an object, use it directly\n\t\t\tif ( typeof referencesSupport === 'object' && referencesSupport !== null ) {\n\t\t\t\treturn referencesSupport;\n\t\t\t}\n\t\t\t\n\t\t\t// If it's just true, we need to handle this case\n\t\t\tif ( referencesSupport === true ) {\n\t\t\t\t// Return null as we need actual configuration\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\treturn null;\n\t\t},\n\t\t[ activePostType ]\n\t);\n\n\t/**\n\t * Fetch reference taxonomy terms (configured via ref_tax)\n\t */\n\tconst refTerms = useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! config || ! config.ref_tax ) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst terms = select( 'core' ).getEntityRecords(\n\t\t\t\t'taxonomy',\n\t\t\t\tconfig.ref_tax,\n\t\t\t\t{\n\t\t\t\t\tper_page: 99, // Large number to get all, but avoid -1. More than 99 is not supported by WordPress.\n\t\t\t\t}\n\t\t\t);\n\t\t\treturn terms || [];\n\t\t},\n\t\t[ config ]\n\t);\n\n\t/**\n\t * Fetch taxonomy objects for reference types\n\t */\n\tconst taxonomies = useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! config || ! config.ref_types || ! Array.isArray( config.ref_types ) ) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst taxonomyObjects = config.ref_types\n\t\t\t\t.map( ( slug ) => select( 'core' ).getTaxonomy( slug ) )\n\t\t\t\t.filter( ( tax ) => tax !== null && tax !== undefined );\n\n\t\t\treturn taxonomyObjects;\n\t\t},\n\t\t[ config ]\n\t);\n\n\t/**\n\t * Build type labels mapping\n\t */\n\tconst typeLabels = useMemo( () => {\n\t\tconst labels = {};\n\t\ttaxonomies.forEach( ( tax ) => {\n\t\t\tlabels[ tax.slug ] = tax.labels?.name || tax.name;\n\t\t} );\n\t\treturn labels;\n\t}, [ taxonomies ] );\n\n\t/**\n\t * Check if block is properly configured\n\t */\n\tconst isConfigured =\n\t\tconfig &&\n\t\ttypeof config === 'object' &&\n\t\tconfig.ref_tax &&\n\t\tconfig.ref_types &&\n\t\tArray.isArray( config.ref_types ) &&\n\t\tconfig.ref_types.length > 0;\n\n\t/**\n\t * Update block metadata with dynamic label\n\t *\n\t * This effect runs whenever the attributes change that affect the label.\n\t * It updates the block's metadata attribute so the label appears in the list view.\n\t */\n\tuseEffect( () => {\n\t\tif ( ! isConfigured ) {\n\t\t\treturn;\n\t\t}\n\n\t\t/**\n\t\t * Generate dynamic block label based on attributes\n\t\t *\n\t\t * Creates a human-readable label that reflects current filters:\n\t\t * - Reference term name (if specific term selected)\n\t\t * - Year (if specified)\n\t\t * - Reference type (if not \"all\")\n\t\t *\n\t\t * @return {string} Dynamic label for block\n\t\t */\n\t\tconst getBlockLabel = () => {\n\t\t\tconst parts = [];\n\n\t\t\t// Add reference term name if specific term selected\n\t\t\tif ( refTermId > 0 ) {\n\t\t\t\tconst refTerm = refTerms.find(\n\t\t\t\t\t( p ) => p.id === refTermId\n\t\t\t\t);\n\t\t\t\tif ( refTerm ) {\n\t\t\t\t\tparts.push( refTerm.name );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add year if specified\n\t\t\tif ( year > 0 ) {\n\t\t\t\tparts.push( year.toString() );\n\t\t\t}\n\n\t\t\t// Add reference type if not \"all\"\n\t\t\tif ( referenceType !== 'all' ) {\n\t\t\t\tparts.push( typeLabels[ referenceType ] || referenceType );\n\t\t\t}\n\n\t\t\t// Construct final label\n\t\t\tif ( parts.length > 0 ) {\n\t\t\t\treturn (\n\t\t\t\t\t__( 'References', 'gatherpress-references' ) + ': ' +\n\t\t\t\t\tparts.join( ' â€¢ ' )\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Default label when no filters applied\n\t\t\treturn __( 'References', 'gatherpress-references' );\n\t\t};\n\t\tconst label = getBlockLabel();\n\n\t\t// Update the metadata attribute with the new name\n\t\tsetAttributes( {\n\t\t\tmetadata: {\n\t\t\t\t...attributes.metadata,\n\t\t\t\tname: label,\n\t\t\t},\n\t\t} );\n\t}, [\n\t\tsetAttributes,\n\t\trefTermId,\n\t\tyear,\n\t\treferenceType,\n\t\trefTerms,\n\t\ttypeLabels,\n\t\tisConfigured,\n\t] );\n\n\t/**\n\t * Calculate secondary heading level\n\t *\n\t * Type headings are always one level smaller than year headings,\n\t * but capped at H6 (no H7 or higher).\n\t */\n\tconst secondaryHeadingLevel = Math.min( headingLevel + 1, 6 );\n\n\t// Create dynamic heading tag components\n\tconst YearHeading = `h${ headingLevel }`;\n\tconst TypeHeading = `h${ secondaryHeadingLevel }`;\n\n\t/**\n\t * Placeholder data for editor preview\n\t */\n\tconst getPlaceholderData = () => {\n\t\tif ( ! isConfigured || ! config.ref_types ) {\n\t\t\treturn {};\n\t\t}\n\n\t\t// Determine which year(s) to show in preview\n\t\tconst currentYear = new Date().getFullYear();\n\t\tconst displayYear = year > 0 ? year : currentYear;\n\n\t\t// Build placeholder data using configured taxonomies\n\t\tconst buildYearData = () => {\n\t\t\tconst yearData = {};\n\t\t\tconfig.ref_types.forEach( ( taxSlug ) => {\n\t\t\t\tconst taxLabel = typeLabels[ taxSlug ] || taxSlug;\n\t\t\t\tyearData[ taxSlug ] = [\n\t\t\t\t\t`${ taxLabel } Example 1`,\n\t\t\t\t\t`${ taxLabel } Example 2`,\n\t\t\t\t].sort();\n\t\t\t} );\n\t\t\treturn yearData;\n\t\t};\n\n\t\t// If year is specified, show only that year\n\t\tif ( year > 0 ) {\n\t\t\treturn {\n\t\t\t\t[ displayYear ]: buildYearData(),\n\t\t\t};\n\t\t}\n\n\t\t// If no year specified, show two years of data\n\t\treturn {\n\t\t\t[ currentYear + ' ' ]: buildYearData(),\n\t\t\t[ currentYear - 1 + ' ' ]: buildYearData(),\n\t\t};\n\t};\n\n\tconst placeholderData = getPlaceholderData();\n\n\t/**\n\t * Filter placeholder data based on reference type\n\t *\n\t * If a specific type is selected, only show data for that type.\n\t * Otherwise show all types. Removes empty years after filtering.\n\t *\n\t * @return {Object} Filtered placeholder data structure\n\t */\n\tconst getFilteredPlaceholderData = () => {\n\t\t// Show all types if 'all' is selected\n\t\tif ( referenceType === 'all' ) {\n\t\t\treturn placeholderData;\n\t\t}\n\n\t\t// Filter to show only selected type\n\t\tconst filtered = {};\n\t\tObject.keys( placeholderData ).forEach( ( yearKey ) => {\n\t\t\tconst yearData = placeholderData[ yearKey ];\n\t\t\t// Only include year if it has data for the selected type\n\t\t\tif (\n\t\t\t\tyearData[ referenceType ] &&\n\t\t\t\tyearData[ referenceType ].length > 0\n\t\t\t) {\n\t\t\t\tfiltered[ yearKey ] = {\n\t\t\t\t\t[ referenceType ]: yearData[ referenceType ],\n\t\t\t\t};\n\t\t\t}\n\t\t} );\n\t\treturn filtered;\n\t};\n\n\tconst filteredData = getFilteredPlaceholderData();\n\n\t/**\n\t * Sort years based on yearSortOrder\n\t *\n\t * Only sorts when no specific year is selected.\n\t * Preserves child arrays order (taxonomy data).\n\t *\n\t * @return {Array} Sorted array of year keys\n\t */\n\tconst getSortedYears = () => {\n\t\tconst years = Object.keys( filteredData );\n\n\t\t// Don't sort if a specific year is selected\n\t\tif ( year > 0 ) {\n\t\t\treturn years;\n\t\t}\n\n\t\t// Sort based on yearSortOrder attribute\n\t\treturn years.sort( ( a, b ) => {\n\t\t\tconst yearA = parseInt( a );\n\t\t\tconst yearB = parseInt( b );\n\n\t\t\tif ( yearSortOrder === 'asc' ) {\n\t\t\t\treturn yearA - yearB; // Oldest first\n\t\t\t}\n\t\t\treturn yearB - yearA; // Newest first (default)\n\t\t} );\n\t};\n\n\tconst sortedYears = getSortedYears();\n\n\t// Determine if year sort control should be shown\n\tconst showYearSortControl = year === 0;\n\n\t// Determine if we should show type headings.\n\tconst showTypeHeadings = referenceType === 'all';\n\n\t// Show configuration error if block is not properly configured\n\tif ( ! isConfigured || ! activePostType ) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody\n\t\t\t\t\t\ttitle={ __(\n\t\t\t\t\t\t\t'Reference Settings',\n\t\t\t\t\t\t\t'gatherpress-references'\n\t\t\t\t\t\t) }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Notice status=\"warning\" isDismissible={ false }>\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t'References block requires a post type with gatherpress_references support.',\n\t\t\t\t\t\t\t\t'gatherpress-references'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</Notice>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\t\t\t\t<div { ...useBlockProps() }>\n\t\t\t\t\t<Notice status=\"warning\" isDismissible={ false }>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t'This block requires a post type with gatherpress_references support configured.',\n\t\t\t\t\t\t\t\t'gatherpress-references'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t{ supportedPostTypes.length > 0 && (\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t'Supported post types:',\n\t\t\t\t\t\t\t\t\t\t'gatherpress-references'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</strong>{ ' ' }\n\t\t\t\t\t\t\t\t{ supportedPostTypes\n\t\t\t\t\t\t\t\t\t.map( ( type ) => type.labels?.name || type.name )\n\t\t\t\t\t\t\t\t\t.join( ', ' ) }\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Notice>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody\n\t\t\t\t\ttitle={ __(\n\t\t\t\t\t\t'Reference Settings',\n\t\t\t\t\t\t'gatherpress-references'\n\t\t\t\t\t) }\n\t\t\t\t>\n\t\t\t\t\t{ /* Post Type selector - only show if multiple supported post types */ }\n\t\t\t\t\t{ supportedPostTypes.length > 1 && (\n\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\tlabel={ __( 'Post Type', 'gatherpress-references' ) }\n\t\t\t\t\t\t\tvalue={ postType || '' }\n\t\t\t\t\t\t\toptions={ [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: __(\n\t\t\t\t\t\t\t\t\t\t'Select post type',\n\t\t\t\t\t\t\t\t\t\t'gatherpress-references'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t...supportedPostTypes.map( ( type ) => ( {\n\t\t\t\t\t\t\t\t\tlabel: type.labels?.name || type.name,\n\t\t\t\t\t\t\t\t\tvalue: type.slug,\n\t\t\t\t\t\t\t\t} ) ),\n\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tsetAttributes( { postType: value } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\thelp={ __(\n\t\t\t\t\t\t\t\t'Select which post type to query for references',\n\t\t\t\t\t\t\t\t'gatherpress-references'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ /* Reference Term filter dropdown */ }\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tlabel={ __( 'Reference Term', 'gatherpress-references' ) }\n\t\t\t\t\t\tvalue={ refTermId }\n\t\t\t\t\t\toptions={ [\n\t\t\t\t\t\t\t// Default option for auto-detection\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: __(\n\t\t\t\t\t\t\t\t\t'All (or auto-detect)',\n\t\t\t\t\t\t\t\t\t'gatherpress-references'\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tvalue: 0,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t...refTerms.map( ( refTerm ) => ( {\n\t\t\t\t\t\t\t\tlabel: refTerm.name,\n\t\t\t\t\t\t\t\tvalue: refTerm.id,\n\t\t\t\t\t\t\t} ) ),\n\t\t\t\t\t\t] }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { refTermId: parseInt( value ) } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\thelp={ __(\n\t\t\t\t\t\t\t'Select a specific reference term or leave as auto-detect',\n\t\t\t\t\t\t\t'gatherpress-references'\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\n\t\t\t\t\t{ /* Year filter text input */ }\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={ __( 'Year', 'gatherpress-references' ) }\n\t\t\t\t\t\tvalue={ year > 0 ? year.toString() : '' }\n\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\tconst numValue = parseInt( value );\n\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\tyear: isNaN( numValue ) ? 0 : numValue,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\tmax={ new Date().getFullYear() + 1 }\n\t\t\t\t\t\tplaceholder={ __(\n\t\t\t\t\t\t\t'Leave empty for all years',\n\t\t\t\t\t\t\t'gatherpress-references'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\thelp={ __(\n\t\t\t\t\t\t\t'Enter a specific year (e.g., 2024) or leave empty for all years',\n\t\t\t\t\t\t\t'gatherpress-references'\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\n\t\t\t\t\t{ /* Year sort order toggle (only when no specific year) */ }\n\t\t\t\t\t{ showYearSortControl && (\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\tyearSortOrder === 'asc'\n\t\t\t\t\t\t\t\t\t? 'Sort Years Oldest First'\n\t\t\t\t\t\t\t\t\t: 'Sort Years Newest First',\n\t\t\t\t\t\t\t\t'gatherpress-references'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tchecked={ yearSortOrder === 'asc' }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\tyearSortOrder: value ? 'asc' : 'desc',\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\thelp={ __(\n\t\t\t\t\t\t\t\t'Toggle to sort years from oldest to newest. Default is newest first.',\n\t\t\t\t\t\t\t\t'gatherpress-references'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ /* Reference type filter dropdown */ }\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t'Reference Type',\n\t\t\t\t\t\t\t'gatherpress-references'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tvalue={ referenceType }\n\t\t\t\t\t\toptions={ [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel: __(\n\t\t\t\t\t\t\t\t\t'All Types',\n\t\t\t\t\t\t\t\t\t'gatherpress-references'\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tvalue: 'all',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t...taxonomies.map( ( tax ) => ( {\n\t\t\t\t\t\t\t\tlabel: tax.labels?.name || tax.name,\n\t\t\t\t\t\t\t\tvalue: tax.slug,\n\t\t\t\t\t\t\t} ) ),\n\t\t\t\t\t\t] }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { referenceType: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\thelp={ __(\n\t\t\t\t\t\t\t'Choose which type of references to display',\n\t\t\t\t\t\t\t'gatherpress-references'\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\n\t\t\t\t\t{ /* Heading level slider */ }\n\t\t\t\t\t<RangeControl\n\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t'Year Heading Level',\n\t\t\t\t\t\t\t'gatherpress-references'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tvalue={ headingLevel }\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tsetAttributes( { headingLevel: value } )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\tmax={ 5 } // Max H5 so secondary can be H6\n\t\t\t\t\t\thelp={ __(\n\t\t\t\t\t\t\t'Choose the heading level for year headings (H1-H5). Type headings will be one level smaller.',\n\t\t\t\t\t\t\t'gatherpress-references'\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\n\t\t\t{ /* Block content preview */ }\n\t\t\t<div { ...useBlockProps() }>\n\t\t\t\t{ Object.keys( filteredData ).length > 0 && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{ /* Loop through sorted years */ }\n\t\t\t\t\t\t{ sortedYears.map( ( yearKey ) => {\n\t\t\t\t\t\t\tconst yearData = filteredData[ yearKey ];\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<div key={ yearKey }>\n\t\t\t\t\t\t\t\t\t<YearHeading className=\"references-year\">\n\t\t\t\t\t\t\t\t\t\t{ yearKey }\n\t\t\t\t\t\t\t\t\t</YearHeading>\n\n\t\t\t\t\t\t\t\t\t{ /* Loop through types within year */ }\n\t\t\t\t\t\t\t\t\t{ Object.keys( yearData ).map(\n\t\t\t\t\t\t\t\t\t\t( typeKey ) => {\n\t\t\t\t\t\t\t\t\t\t\tconst items = yearData[ typeKey ];\n\t\t\t\t\t\t\t\t\t\t\tif ( items.length === 0 ) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<div key={ typeKey }>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ /* Type heading - only show when displaying all types */ }\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ showTypeHeadings && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TypeHeading className=\"references-type\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttypeLabels[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttypeKey\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</TypeHeading>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ul className=\"references-list\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ items.map(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t( item, index ) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ item }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","// extracted by mini-css-extract-plugin\nexport {};","/**\n * Registers a new block provided a unique name and an object defining its behavior.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/\n */\nimport { registerBlockType } from '@wordpress/blocks';\n\n/**\n * Lets webpack process CSS, SASS or SCSS files referenced in JavaScript files.\n * All files containing `style` keyword are bundled together. The code used\n * gets applied both to the front of your site and to the editor.\n *\n * @see https://www.npmjs.com/package/@wordpress/scripts#using-css\n */\nimport './style.scss';\n\n/**\n * Internal dependencies\n */\nimport Edit from './edit';\nimport metadata from './block.json';\n\n/**\n * Every block starts by registering a new block type definition.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-registration/\n */\nregisterBlockType( metadata.name, {\n\t/**\n\t * @see ./edit.js\n\t */\n\tedit: Edit,\n} );\n","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Check if module exists (development only)\n\tif (__webpack_modules__[moduleId] === undefined) {\n\t\tvar e = new Error(\"Cannot find module '\" + moduleId + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"index\": 0,\n\t\"./style-index\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkgatherpress_references\"] = globalThis[\"webpackChunkgatherpress_references\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"./style-index\"], () => (__webpack_require__(\"./src/index.js\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["__","useBlockProps","InspectorControls","PanelBody","SelectControl","TextControl","ToggleControl","RangeControl","Notice","useSelect","useEffect","useMemo","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Edit","attributes","setAttributes","postType","refTermId","year","referenceType","headingLevel","yearSortOrder","supportedPostTypes","select","postTypes","getPostTypes","per_page","filter","type","supports","gatherpress_references","length","slug","activePostType","config","postTypeObject","getPostType","referencesSupport","Array","isArray","refTerms","ref_tax","terms","getEntityRecords","taxonomies","ref_types","taxonomyObjects","map","getTaxonomy","tax","undefined","typeLabels","labels","forEach","name","isConfigured","getBlockLabel","parts","refTerm","find","p","id","push","toString","join","label","metadata","secondaryHeadingLevel","Math","min","YearHeading","TypeHeading","getPlaceholderData","currentYear","Date","getFullYear","displayYear","buildYearData","yearData","taxSlug","taxLabel","sort","placeholderData","getFilteredPlaceholderData","filtered","Object","keys","yearKey","filteredData","getSortedYears","years","a","b","yearA","parseInt","yearB","sortedYears","showYearSortControl","showTypeHeadings","children","title","status","isDismissible","value","options","onChange","help","numValue","isNaN","max","placeholder","checked","className","typeKey","items","item","index","registerBlockType","edit"],"ignoreList":[],"sourceRoot":""}