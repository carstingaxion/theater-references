(()=>{"use strict";var e,r={687(){const e=window.wp.blocks,r=window.wp.i18n,s=window.wp.blockEditor,t=window.wp.components,a=window.wp.data,n=window.wp.element,l=window.ReactJSXRuntime,c=JSON.parse('{"UU":"gatherpress/references"}');(0,e.registerBlockType)(c.UU,{edit:function({attributes:e,setAttributes:c}){const{productionId:i,year:o,referenceType:h,headingLevel:f}=e,p=(0,a.useSelect)(e=>e("core").getEntityRecords("taxonomy","gatherpress-productions",{per_page:-1})||[],[]);(0,n.useEffect)(()=>{const s=(()=>{const e=[];if(i>0){const r=p.find(e=>e.id===i);r&&e.push(r.name)}if(o&&e.push(o),"all"!==h){const s={ref_client:(0,r.__)("Clients","gatherpress-references"),ref_festival:(0,r.__)("Festivals","gatherpress-references"),ref_award:(0,r.__)("Awards","gatherpress-references")};e.push(s[h]||h)}return e.length>0?(0,r.__)("References:","gatherpress-references")+e.join(" â€¢ "):(0,r.__)("References","gatherpress-references")})();c({metadata:{...e.metadata,name:s}})},[e.metadata,c,i,o,h,p]);const _=Math.min(f+1,6),d=`h${f}`,g=`h${_}`,u={ref_client:(0,r.__)("Clients","gatherpress-references"),ref_festival:(0,r.__)("Festivals","gatherpress-references"),ref_award:(0,r.__)("Awards","gatherpress-references")},v={2024:{ref_client:[(0,r.__)("Royal Theater London","gatherpress-references"),(0,r.__)("Vienna Burgtheater","gatherpress-references")],ref_festival:[(0,r.__)("Edinburgh International Festival","gatherpress-references")],ref_award:[(0,r.__)("Best Director Award","gatherpress-references")]},2023:{ref_client:[(0,r.__)("Berlin Staatstheater","gatherpress-references")],ref_festival:[(0,r.__)("Avignon Festival","gatherpress-references"),(0,r.__)("Salzburg Festival","gatherpress-references")],ref_award:[]}},w=(()=>{if("all"===h)return v;const e={};return Object.keys(v).forEach(r=>{const s=v[r];s[h]&&s[h].length>0&&(e[r]={[h]:s[h]})}),e})();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.InspectorControls,{children:(0,l.jsxs)(t.PanelBody,{title:(0,r.__)("Reference Settings","gatherpress-references"),children:[(0,l.jsx)(t.SelectControl,{label:(0,r.__)("Production","gatherpress-references"),value:i,options:[{label:(0,r.__)("Auto-detect (or all)","gatherpress-references"),value:0},...p.map(e=>({label:e.name,value:e.id}))],onChange:e=>c({productionId:parseInt(e)}),help:(0,r.__)("Select a specific production or leave as auto-detect","gatherpress-references")}),(0,l.jsx)(t.TextControl,{label:(0,r.__)("Year","gatherpress-references"),value:o,onChange:e=>c({year:e}),help:(0,r.__)("Filter by specific year (e.g., 2017). Leave empty for all years.","gatherpress-references"),type:"number"}),(0,l.jsx)(t.SelectControl,{label:(0,r.__)("Reference Type","gatherpress-references"),value:h,options:[{label:(0,r.__)("All Types","gatherpress-references"),value:"all"},{label:(0,r.__)("Clients","gatherpress-references"),value:"ref_client"},{label:(0,r.__)("Festivals","gatherpress-references"),value:"ref_festival"},{label:(0,r.__)("Awards","gatherpress-references"),value:"ref_award"}],onChange:e=>c({referenceType:e}),help:(0,r.__)("Choose which type of references to display","gatherpress-references")}),(0,l.jsx)(t.RangeControl,{label:(0,r.__)("Year Heading Level","gatherpress-references"),value:f,onChange:e=>c({headingLevel:e}),min:1,max:5,help:(0,r.__)("Choose the heading level for year headings (H1-H5). Type headings will be one level smaller.","gatherpress-references")})]})}),(0,l.jsx)("div",{...(0,s.useBlockProps)(),children:Object.keys(w).length>0?(0,l.jsx)(l.Fragment,{children:Object.keys(w).map(e=>{const r=w[e];return(0,l.jsxs)("div",{children:[(0,l.jsx)(d,{className:"references-year",children:e}),Object.keys(r).map(e=>{const s=r[e];return 0===s.length?null:(0,l.jsxs)("div",{children:[(0,l.jsx)(g,{className:"references-type",children:u[e]}),(0,l.jsx)("ul",{className:"references-list",children:s.map((e,r)=>(0,l.jsx)("li",{children:e},r))})]},e)})]},e)})}):(0,l.jsx)("p",{className:"no-references",children:(0,r.__)("No references found matching the selected criteria.","gatherpress-references")})})]})}})}},s={};function t(e){var a=s[e];if(void 0!==a)return a.exports;var n=s[e]={exports:{}};return r[e](n,n.exports,t),n.exports}t.m=r,e=[],t.O=(r,s,a,n)=>{if(!s){var l=1/0;for(h=0;h<e.length;h++){for(var[s,a,n]=e[h],c=!0,i=0;i<s.length;i++)(!1&n||l>=n)&&Object.keys(t.O).every(e=>t.O[e](s[i]))?s.splice(i--,1):(c=!1,n<l&&(l=n));if(c){e.splice(h--,1);var o=a();void 0!==o&&(r=o)}}return r}n=n||0;for(var h=e.length;h>0&&e[h-1][2]>n;h--)e[h]=e[h-1];e[h]=[s,a,n]},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e={57:0,350:0};t.O.j=r=>0===e[r];var r=(r,s)=>{var a,n,[l,c,i]=s,o=0;if(l.some(r=>0!==e[r])){for(a in c)t.o(c,a)&&(t.m[a]=c[a]);if(i)var h=i(t)}for(r&&r(s);o<l.length;o++)n=l[o],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(h)},s=globalThis.webpackChunkgatherpress_references=globalThis.webpackChunkgatherpress_references||[];s.forEach(r.bind(null,0)),s.push=r.bind(null,s.push.bind(s))})();var a=t.O(void 0,[350],()=>t(687));a=t.O(a)})();